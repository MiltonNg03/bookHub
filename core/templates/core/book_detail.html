{% extends 'core/base.html' %}

{% block title %}{{ book.title }} - BookHub{% endblock %}

{% block content %}
<div>
    <nav class="header">
        <ul class="sous_header">
            <li class="title_header"><a href="{% url 'home' %}">Home</a></li>
            <li><a href="{% url 'book_list' %}">Books</a></li>
        </ul>
    </nav>
    <div class="title_book_detail">
        <h2> Book: {{ book.title }}</h2>
    </div>
    
    <div class="book_detail">
        {% if book.cover_image %}
        <img src="{{ book.cover_image.url }}" alt="{{ book.title }}">
        {% else %}
        <div>[Book Image]</div>
        {% endif %}
        
        <div class="book_detail_info">
            <h1>{{ book.title }}</h1>
            
            <p><strong>Author:</strong> {{ book.author.name }}</p>
            <p><strong>Category:</strong> {{ book.category.name }}</p>
            <p><strong>ISBN:</strong> {{ book.isbn }}</p>
            
            <div class="price">{{ book.price }} KES</div>
            
            {% if book.stock_quantity > 0 %}
            <p style="color: green;">✓ In stock ({{ book.stock_quantity }} available)</p>
            {% else %}
            <p style="color: red;">✗ Out of stock</p>
            {% endif %}
            
            <div style="margin: 1.5rem 0;">
                <h3>Description</h3>
                <p>{{ book.description }}</p>
            </div>
            
            {% if user.is_authenticated and book.stock_quantity > 0 %}
            <button onclick="addToCart({{ book.id }}, this)">Add to Cart</button>
            {% elif not user.is_authenticated %}
            <p><a href="{% url 'login' %}" style="color: cadetblue;">Login</a> to add this book to your cart.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}