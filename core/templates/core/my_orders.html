{% extends 'core/base.html' %}

{% block title %}My Orders - BookHub{% endblock %}

{% block content %}
<div class="container" style="margin-top: 10vh;">
    <h1>My Orders</h1>
    
    {% if purchased_books or cart_books %}
        <div class="orders-section">
            
            {% if purchased_books %}
                <div>

                    <h2>Purchased Books</h2>
                    <div class="sous_section_two">
                            {% for item in purchased_books %}
                                <div class="book_list" >
                                    {% if item.book.cover_image %}
                                        <img src="{{ item.book.cover_image.url }}" alt="{{ item.book.title }}"style="height:65%" class="book-cover">
                                    {% else %}
                                        <div class="no-image">No image</div>
                                    {% endif %}
                                    <div class="book-info">
                                        <h3>{{ item.book.title }}</h3>
                                        <p class="author">by {{ item.book.author.name }}</p>
                                        <p class="price">{{ item.price }}â‚¬</p>
                                        <p class="quantity">Quantity: {{ item.quantity }}</p>
                                        <p class="status purchased">âœ“ Purchased</p>
                                        <p class="order-date">Ordered on {{ item.order.created_at|date:"m/d/Y" }}</p>
                                    </div>
                                </div>
                            {% endfor %}
                    </div>                    
                </div>

            {% endif %}
            
            {% if cart_books %}
                <h2>Books in Cart</h2>

                <div class="sous_section_two">
                    <div class="sous_section_two">
                        {% for item in cart_books %}
                            <div class="book_list">
                                {% if item.book.cover_image %}
                                    <img src="{{ item.book.cover_image.url }}" alt="{{ item.book.title }}" class="book-cover">
                                {% else %}
                                    <div class="no-image">No image</div>
                                {% endif %}
                                <div class="book-info">
                                    <h3>{{ item.book.title }}</h3>
                                    <p class="author">by {{ item.book.author.name }}</p>
                                    <p class="price">{{ item.book.price }}â‚¬</p>
                                    <p class="quantity">Quantity: {{ item.quantity }}</p>
                                    <p class="status in-cart">ðŸ›’ Still in cart</p>
                                    <p class="cart-date">Added on {{ item.added_at|date:"m/d/Y" }}</p>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
            
        </div>
    {% else %}
        <div class="empty-orders" style="height: 49vh; display: grid; place-items: center;">
            <p>You haven't purchased any books yet and your cart is empty.</p>
            <a href="{% url 'book_list' %}" class="btn btn-primary">Discover our books</a>
        </div>
    {% endif %}
</div>

{% endblock %}